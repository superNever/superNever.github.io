<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8" />
  
  <title>promise | supernever</title>
  <meta name="author" content="supernever" />

  
  <meta name="description" content="简单介绍一下promise" />
  

  

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />

  <meta property="og:title" content="promise" />
  <meta property="og:site_name" content="supernever" />

  
  

  
    <meta property="og:image" content="undefined" />
  

  
  <link href="/css/images/favicon.ico" rel="icon" />
  

  <link rel="alternate" href="/atom.xml" title="supernever" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  


  <!-- baidu webmaster push -->
  <script src='//push.zhanzhang.baidu.com/push.js'></script>

</head>


<body>
  <header id="header" class="inner"><div class="alignleft">
  <h1><a href="/">supernever</a></h1>
  <h2><a href="/"></a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/">Home</a></li>
    
      <li><a href="/archives">Archives</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div></header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper"><article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2017-01-24T03:11:13.000Z"><a href="/2017/01/24/promise/">2017-01-24</a></time>
      
      
  
    <h1 class="title">promise</h1>
  

    </header>
    <div class="entry">
      
        <p>简单介绍一下promise<br><a id="more"></a></p>
<h3 id="基本用法"><a href="#基本用法" class="headerlink" title="基本用法"></a>基本用法</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">let</span> promise = new Promise((resolve,reject)=<span class="arrow-right">&gt;</span>&#123;</div><div class="line">    /**业务处理**/</div><div class="line">    resolve(/**data**/);</div><div class="line">&#125;)</div><div class="line">promise.then((data)=<span class="arrow-right">&gt;</span>&#123;</div><div class="line">    /**数据处理**/</div><div class="line">&#125;).catch((err)=<span class="arrow-right">&gt;</span>&#123;</div><div class="line">    /**错误处理**/</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h3 id="promise常规用法"><a href="#promise常规用法" class="headerlink" title="promise常规用法"></a>promise常规用法</h3><ul>
<li>promise.then</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">var promise = new Promise(resolve,reject)&#123;</div><div class="line">    resolve(<span class="string">'传递给then的值'</span>)</div><div class="line">&#125;</div><div class="line">promise.then(<span class="keyword">function</span>(data)&#123;</div><div class="line">    console.log(data);</div><div class="line">&#125;,<span class="keyword">function</span>(error)&#123;</div><div class="line">    console.log(error);</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<ul>
<li>promise.catch</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">var promise = new Promise(<span class="keyword">function</span>(resolve, reject)&#123;</div><div class="line">    resolve(<span class="string">"传递给then的值"</span>);</div><div class="line">&#125;);</div><div class="line">promise.then(<span class="keyword">function</span> (value) &#123;</div><div class="line">    console.log(value);</div><div class="line">&#125;).catch(<span class="keyword">function</span> (error) &#123;</div><div class="line">    console.error(error);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<ul>
<li>promise.resolve</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">function</span> asyncTask(name)&#123;</div><div class="line">    <span class="built_in">return</span> Promise.resolve(name).then(<span class="keyword">function</span>(value)&#123;</div><div class="line">        <span class="built_in">return</span> <span class="string">"Done"</span>+value</div><div class="line">    &#125;)</div><div class="line">&#125;</div><div class="line">var taskName = <span class="string">"task 1"</span>;</div><div class="line">asyncTask(taskName).then(<span class="keyword">function</span>(value)&#123;</div><div class="line">    console.log(value)</div><div class="line">&#125;).catch(<span class="keyword">function</span>(err)&#123;</div><div class="line">    console.log(err);</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<ul>
<li>promise.reject</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">var r = Promise.reject(new Error(<span class="string">'err'</span>))</div></pre></td></tr></table></figure>
<ul>
<li>promise.all</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">var p1 = Promise.resolve(1),</div><div class="line">    p2 = Promise.resolve(2),</div><div class="line">    p3 = Promise.resolve(3);</div><div class="line">Promise.all([p1, p2, p3]).then(<span class="keyword">function</span> (results) &#123;</div><div class="line">    console.log(results);  // [1, 2, 3]</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<ul>
<li>promise.race</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">var p1 = Promise.resolve(1),</div><div class="line">    p2 = Promise.resolve(2),</div><div class="line">    p3 = Promise.resolve(3);</div><div class="line">Promise.race([p1, p2, p3]).then(<span class="keyword">function</span> (results) &#123;</div><div class="line">    console.log(results);  // [1]</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h3 id="Promise-resolve"><a href="#Promise-resolve" class="headerlink" title="Promise.resolve()"></a>Promise.resolve()</h3><p><em>Promise.reject(error)是和 Promise.resolve(value) 类似的<mark>静态方法</mark>，是 new Promise() 方法的快捷方式。</em></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">    Promise.resolve(42).then(<span class="keyword">function</span>(value)&#123;</div><div class="line">    console.log(value);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<blockquote>
<p>简单总结一下 Promise.resolve 方法的话，可以认为它的作用就是将传递给它的参数填充（Fulfilled）到promise对象后并返回这个promise对象。<br>此外，Promise的很多处理内部也是使用了 Promise.resolve 算法将值转换为promise对象后再进行处理的。</p>
</blockquote>
<h3 id="Promise-reject"><a href="#Promise-reject" class="headerlink" title="Promise.reject()"></a>Promise.reject()</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Promise.reject(new Error(<span class="string">"出错了"</span>))</div><div class="line">//是下面代码的语法糖</div><div class="line">new Promise(<span class="keyword">function</span>(resolve,reject)&#123;</div><div class="line">    reject(new Error(<span class="string">"出错了"</span>));</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<blockquote>
<p>它和Promise.resolve(value) 的不同之处在于promise内调用的函数是reject而不是resolve，这在编写测试代码或者进行debug时，说不定会用得上。</p>
</blockquote>
<h3 id="几个很重要的原则问题"><a href="#几个很重要的原则问题" class="headerlink" title="几个很重要的原则问题"></a>几个很重要的原则问题</h3><ul>
<li><p>绝对不能对异步回调函数（即使在数据已经就绪）进行同步调用。</p>
</li>
<li><p>如果对异步回调函数进行同步调用的话，处理顺序可能会与预期不符，可能带来意料之外的后果。</p>
</li>
<li><p>对异步回调函数进行同步调用，还可能导致栈溢出或异常处理错乱等问题。</p>
</li>
<li><p>如果想在将来某时刻调用异步回调函数的话，可以使用 setTimeout 等异步API。</p>
</li>
</ul>
<p><strong>简单一句话：Promise只能使用异步调用方式 。</strong></p>
<ul>
<li><p>不合法的调用</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">function</span> onReady(fn) &#123;</div><div class="line">    var readyState = document.readyState;</div><div class="line">    <span class="keyword">if</span> (readyState === <span class="string">'interactive'</span> || readyState === <span class="string">'complete'</span>) &#123;</div><div class="line">        fn();</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        window.addEventListener(<span class="string">'DOMContentLoaded'</span>, fn);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">onReady(<span class="function"><span class="title">function</span></span> () &#123;</div><div class="line">    console.log(<span class="string">'DOM fully loaded and parsed'</span>);</div><div class="line">&#125;);</div><div class="line">console.log(<span class="string">'==Starting=='</span>);</div><div class="line">//控制台打印</div><div class="line">DOM fully loaded and parsed</div><div class="line">==Starting==</div></pre></td></tr></table></figure>
</li>
<li><p>符合规范</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">function</span> onReady(fn) &#123;</div><div class="line">    var readyState = document.readyState;</div><div class="line">    <span class="keyword">if</span> (readyState === <span class="string">'interactive'</span> || readyState === <span class="string">'complete'</span>) &#123;</div><div class="line">        <span class="built_in">set</span>Timeout(fn, 0);</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        window.addEventListener(<span class="string">'DOMContentLoaded'</span>, fn);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">onReady(<span class="function"><span class="title">function</span></span> () &#123;</div><div class="line">    console.log(<span class="string">'DOM fully loaded and parsed'</span>);</div><div class="line">&#125;);</div><div class="line">console.log(<span class="string">'==Starting=='</span>);</div><div class="line">//控制台打印</div><div class="line"></div><div class="line"><span class="arrow-left">&lt;</span>mark<span class="arrow-right">&gt;</span>Starting<span class="arrow-left">&lt;</span>/mark<span class="arrow-right">&gt;</span></div><div class="line">DOM fully loaded and parsed</div></pre></td></tr></table></figure>
</li>
<li><p>上述例子用promise重写</p>
<blockquote>
<p>由于Promise保证了每次调用都是以异步方式进行的，所以我们在实际编码中不需要调用 setTimeout 来自己实现异步调用。</p>
</blockquote>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">function</span> <span class="function"><span class="title">onReadyPromise</span></span>() &#123;</div><div class="line">    <span class="built_in">return</span> new Promise(<span class="keyword">function</span> (resolve, reject) &#123;</div><div class="line">        var readyState = document.readyState;</div><div class="line">        <span class="keyword">if</span> (readyState === <span class="string">'interactive'</span> || readyState === <span class="string">'complete'</span>) &#123;</div><div class="line">            resolve();</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            window.addEventListener(<span class="string">'DOMContentLoaded'</span>, resolve);</div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line">&#125;</div><div class="line">onReadyPromise().then(<span class="function"><span class="title">function</span></span> () &#123;</div><div class="line">    console.log(<span class="string">'DOM fully loaded and parsed'</span>);</div><div class="line">&#125;);</div><div class="line">console.log(<span class="string">'==Starting=='</span>);</div></pre></td></tr></table></figure>
<p>对于为什么请看<a href="http://effectivejs.com/" target="_blank" rel="external">这里</a>.</p>
<h3 id="promise-chain"><a href="#promise-chain" class="headerlink" title="promise chain"></a>promise chain</h3><ul>
<li>基本用法<blockquote>
<p>在本例中我们在taskA中使用了 throw 方法故意制造了一个异常。但在实际中想主动进行onRejected调用的时候，应该返回一个Rejected状态的promise对象。</p>
</blockquote>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">function</span> <span class="function"><span class="title">taskA</span></span>() &#123;</div><div class="line">    console.log(<span class="string">"Task A"</span>);</div><div class="line">    throw new Error(<span class="string">"throw Error @ Task A"</span>)</div><div class="line">&#125;</div><div class="line"><span class="keyword">function</span> <span class="function"><span class="title">taskB</span></span>() &#123;</div><div class="line">    console.log(<span class="string">"Task B"</span>);// 不会被调用</div><div class="line">&#125;</div><div class="line"><span class="keyword">function</span> onRejected(error) &#123;</div><div class="line">    console.log(error);// =<span class="arrow-right">&gt;</span> <span class="string">"throw Error @ Task A"</span></div><div class="line">&#125;</div><div class="line"><span class="keyword">function</span> <span class="function"><span class="title">finalTask</span></span>() &#123;</div><div class="line">    console.log(<span class="string">"Final Task"</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line">var promise = Promise.resolve();</div><div class="line">promise</div><div class="line">    .then(taskA)</div><div class="line">    .then(taskB)</div><div class="line">    .catch(onRejected)</div><div class="line">    .then(finalTask);</div><div class="line">//控制台打印</div><div class="line">Task A</div><div class="line">Error: throw Error @ Task A</div><div class="line">Final Task</div></pre></td></tr></table></figure>
<ul>
<li>promise chain 中如何传递参数<blockquote>
<p>前面例子中的Task都是相互独立的，只是被简单调用而已。<br>这时候如果 Task A 想给 Task B 传递一个参数该怎么办呢？<br>答案非常简单，那就是在 Task A 中 return 的返回值，会在 Task B 执行时传给它。</p>
</blockquote>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">function</span> doubleUp(value) &#123;</div><div class="line">    <span class="built_in">return</span> value * 2;</div><div class="line">&#125;</div><div class="line"><span class="keyword">function</span> increment(value) &#123;</div><div class="line">    <span class="built_in">return</span> value + 1;</div><div class="line">&#125;</div><div class="line"><span class="keyword">function</span> output(value) &#123;</div><div class="line">    console.log(value);// =<span class="arrow-right">&gt;</span> (1 + 1) * 2</div><div class="line">&#125;</div><div class="line"></div><div class="line">var promise = Promise.resolve(1);</div><div class="line">promise</div><div class="line">    .then(increment)</div><div class="line">    .then(doubleUp)</div><div class="line">    .then(output)</div><div class="line">    .catch(<span class="keyword">function</span>(error)&#123;</div><div class="line">        // promise chain中出现异常的时候会被调用</div><div class="line">        console.error(error);</div><div class="line">    &#125;);</div></pre></td></tr></table></figure>
<h3 id="Promise-catch"><a href="#Promise-catch" class="headerlink" title="Promise.catch()"></a>Promise.catch()</h3><blockquote>
<p>实际上 Promise#catch 只是 promise.then(undefined, onRejected); 方法的一个别名而已。 也就是说，这个方法用来注册当promise对象状态变为Rejected时的回调函数。</p>
</blockquote>
<p><strong>在ECMAScript 3中保留字是不能作为对象的属性名使用的。 而IE8及以下版本都是基于ECMAScript 3实现的，因此不能将 catch 作为属性来使用，也就不能编写类似 promise.catch() 的代码，因此就出现了 identifier not found 这种语法错误了。<br>而现在的浏览器都是基于ECMAScript 5的，而在ECMAScript 5中保留字都属于 IdentifierName ，也可以作为属性名使用了。</strong><br><mark>解决Promise#catch标识符冲突问题</mark></p>
<ul>
<li><p>使用<code>[]</code>而不使用<code>.</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">var promise = Promise.reject(new Error(<span class="string">"message"</span>));</div><div class="line">promise[<span class="string">"catch"</span>](<span class="keyword">function</span> (error) &#123;</div><div class="line">    console.error(error);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
</li>
<li><p>使用 then也是可以避免这个问题的</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">var promise = Promise.reject(new Error(<span class="string">"message"</span>));</div><div class="line">promise.then(undefined, <span class="keyword">function</span> (error) &#123;</div><div class="line">    console.error(error);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="每次调用then都会返回一个新创建的promise对象"><a href="#每次调用then都会返回一个新创建的promise对象" class="headerlink" title="每次调用then都会返回一个新创建的promise对象"></a>每次调用then都会返回一个新创建的promise对象</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">// 1: 对同一个promise对象同时调用 `<span class="keyword">then</span>` 方法</div><div class="line">var aPromise = new Promise(<span class="keyword">function</span> (resolve) &#123;</div><div class="line">    resolve(100);</div><div class="line">&#125;);</div><div class="line">aPromise.then(<span class="keyword">function</span> (value) &#123;</div><div class="line">    <span class="built_in">return</span> value * 2;</div><div class="line">&#125;);</div><div class="line">aPromise.then(<span class="keyword">function</span> (value) &#123;</div><div class="line">    <span class="built_in">return</span> value * 2;</div><div class="line">&#125;);</div><div class="line">aPromise.then(<span class="keyword">function</span> (value) &#123;</div><div class="line">    console.log(<span class="string">"1: "</span> + value); // =<span class="arrow-right">&gt;</span> 100</div><div class="line">&#125;)</div><div class="line"></div><div class="line">// vs</div><div class="line"></div><div class="line">// 2: 对 `<span class="keyword">then</span>` 进行 promise chain 方式进行调用</div><div class="line">var bPromise = new Promise(<span class="keyword">function</span> (resolve) &#123;</div><div class="line">    resolve(100);</div><div class="line">&#125;);</div><div class="line">bPromise.then(<span class="keyword">function</span> (value) &#123;</div><div class="line">    <span class="built_in">return</span> value * 2;</div><div class="line">&#125;).then(<span class="keyword">function</span> (value) &#123;</div><div class="line">    <span class="built_in">return</span> value * 2;</div><div class="line">&#125;).then(<span class="keyword">function</span> (value) &#123;</div><div class="line">    console.log(<span class="string">"2: "</span> + value); // =<span class="arrow-right">&gt;</span> 100 * 2 * 2</div><div class="line">&#125;);</div><div class="line"></div><div class="line">//控制台打印</div><div class="line">1,100</div><div class="line">2,400</div></pre></td></tr></table></figure>
<blockquote>
<p>如果我们知道了 <code>then</code> 方法每次都会创建并返回一个<code>新</code>的promise对象的话，那么我们就应该不难理解下面代码中对<code>then</code> 的使用方式上的差别了</p>
</blockquote>
<p><mark>then一个很重要的反例</mark><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">function</span> <span class="function"><span class="title">badAsyncCall</span></span>() &#123;</div><div class="line">    var promise = Promise.resolve();</div><div class="line">    promise.then(<span class="function"><span class="title">function</span></span>() &#123;</div><div class="line">        // 任意处理</div><div class="line">        <span class="built_in">return</span> newVar;</div><div class="line">    &#125;);</div><div class="line">    <span class="built_in">return</span> promise;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>这种写法有很多问题，首先在 <code>promise.then</code> 中产生的异常不会被外部捕获，此外，也不能得到 <code>then</code> 的返回值，即使其有返回值。</p>
<p>由于每次 promise.then 调用都会返回一个新创建的promise对象，因此需要像上述方式2那样，采用promise chain的方式将调用进行链式化，修改后的代码如下所示。</p>
<p><mark>正确写法</mark><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">function</span> <span class="function"><span class="title">anAsyncCall</span></span>() &#123;</div><div class="line">    var promise = Promise.resolve();</div><div class="line">    <span class="built_in">return</span> promise.then(<span class="function"><span class="title">function</span></span>() &#123;</div><div class="line">        // 任意处理</div><div class="line">        <span class="built_in">return</span> newVar;</div><div class="line">    &#125;);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="Promise-all"><a href="#Promise-all" class="headerlink" title="Promise.all()"></a>Promise.all()</h3><p><code>Promise.all</code> 接收一个 <code>promise对象的数组</code>作为参数，当这个数组里的所有promise对象全部变为<code>resolve</code>或<code>reject</code>状态的时候，它才会去调用 <code>.then</code> 方法。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">function</span> getURL(URL) &#123;</div><div class="line">    <span class="built_in">return</span> new Promise(<span class="keyword">function</span> (resolve, reject) &#123;</div><div class="line">        var req = new XMLHttpRequest();</div><div class="line">        req.open(<span class="string">'GET'</span>, URL, <span class="literal">true</span>);</div><div class="line">        req.onload = <span class="function"><span class="title">function</span></span> () &#123;</div><div class="line">            <span class="keyword">if</span> (req.status === 200) &#123;</div><div class="line">                resolve(req.responseText);</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                reject(new Error(req.statusText));</div><div class="line">            &#125;</div><div class="line">        &#125;;</div><div class="line">        req.onerror = <span class="function"><span class="title">function</span></span> () &#123;</div><div class="line">            reject(new Error(req.statusText));</div><div class="line">        &#125;;</div><div class="line">        req.send();</div><div class="line">    &#125;);</div><div class="line">&#125;</div><div class="line">var request = &#123;</div><div class="line">        comment: <span class="keyword">function</span> <span class="function"><span class="title">getComment</span></span>() &#123;</div><div class="line">            <span class="built_in">return</span> getURL(<span class="string">'http://azu.github.io/promises-book/json/comment.json'</span>).then(JSON.parse);</div><div class="line">        &#125;,</div><div class="line">        people: <span class="keyword">function</span> <span class="function"><span class="title">getPeople</span></span>() &#123;</div><div class="line">            <span class="built_in">return</span> getURL(<span class="string">'http://azu.github.io/promises-book/json/people.json'</span>).then(JSON.parse);</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line"><span class="keyword">function</span> <span class="function"><span class="title">main</span></span>() &#123;</div><div class="line">    //不采用all</div><div class="line">    /**</div><div class="line">    <span class="keyword">function</span> recordValue(results, value) &#123;</div><div class="line">        results.push(value);</div><div class="line">        <span class="built_in">return</span> results;</div><div class="line">    &#125;</div><div class="line">    // [] 用来保存初始化的值</div><div class="line">    var pushValue = recordValue.bind(null, []);</div><div class="line">    <span class="built_in">return</span> request.comment().then(pushValue).then(request.people).then(pushValue);</div><div class="line">    **/</div><div class="line">    <span class="built_in">return</span> Promise.all([request.comment(), request.people()]);</div><div class="line">&#125;</div><div class="line">// 运行示例</div><div class="line">main().then(<span class="keyword">function</span> (value) &#123;</div><div class="line">    console.log(value);</div><div class="line">&#125;).catch(<span class="keyword">function</span>(error)&#123;</div><div class="line">    console.log(error);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>在上面的代码中，<code>request.comment()</code>和 <code>request.people()</code> 会同时开始执行，而且每个promise的结果（resolve或reject时传递的参数值），和传递给 Promise.all 的promise数组的<code>顺序是一致</code>的。</p>
<p>也就是说，这时候<code>.then</code> 得到的promise数组的执行结果的顺序是<code>固定</code>的，即<code>[comment, people]</code>。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">main().then(<span class="keyword">function</span> (results) &#123;</div><div class="line">    console.log(results); // 按照[comment, people]的顺序</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>栗子🌰</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">// `delay`毫秒后执行resolve</div><div class="line"><span class="keyword">function</span> timerPromisefy(delay) &#123;</div><div class="line">    <span class="built_in">return</span> new Promise(<span class="keyword">function</span> (resolve) &#123;</div><div class="line">        <span class="built_in">set</span>Timeout(<span class="function"><span class="title">function</span></span> () &#123;</div><div class="line">            resolve(delay);</div><div class="line">        &#125;, delay);</div><div class="line">    &#125;);</div><div class="line">&#125;</div><div class="line">var startDate = Date.now();</div><div class="line">// 所有promise变为resolve后程序退出</div><div class="line">Promise.all([</div><div class="line">    timerPromisefy(1),</div><div class="line">    timerPromisefy(32),</div><div class="line">    timerPromisefy(64),</div><div class="line">    timerPromisefy(128)</div><div class="line">]).then(<span class="keyword">function</span> (values) &#123;</div><div class="line">    console.log(Date.now() - startDate + <span class="string">'ms'</span>);</div><div class="line">    // 約128ms</div><div class="line">    console.log(values);    // [1,32,64,128]</div><div class="line">&#125;);</div><div class="line">//可用于多个请求之后，关闭弹出框之类的业务</div></pre></td></tr></table></figure>
<h3 id="Promise-race"><a href="#Promise-race" class="headerlink" title="Promise.race()"></a>Promise.race()</h3><p><code>Promise.all</code> 在接收到的所有的对象promise都变为 FulFilled 或者 Rejected 状态之后才会继续进行后面的处理， 与之相对的是 <code>Promise.race</code> 只要有一个promise对象进入 FulFilled 或者 Rejected 状态的话，就会继续进行后面的处理。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">// `delay`毫秒后执行resolve</div><div class="line"><span class="keyword">function</span> timerPromisefy(delay) &#123;</div><div class="line">    <span class="built_in">return</span> new Promise(<span class="keyword">function</span> (resolve) &#123;</div><div class="line">        <span class="built_in">set</span>Timeout(<span class="function"><span class="title">function</span></span> () &#123;</div><div class="line">            resolve(delay);</div><div class="line">        &#125;, delay);</div><div class="line">    &#125;);</div><div class="line">&#125;</div><div class="line">// 任何一个promise变为resolve或reject 的话程序就停止运行</div><div class="line">Promise.race([</div><div class="line">    timerPromisefy(1),</div><div class="line">    timerPromisefy(32),</div><div class="line">    timerPromisefy(64),</div><div class="line">    timerPromisefy(128)</div><div class="line">]).then(<span class="keyword">function</span> (value) &#123;</div><div class="line">    console.log(value);    // =<span class="arrow-right">&gt;</span> 1</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">var winnerPromise = new Promise(<span class="keyword">function</span> (resolve) &#123;</div><div class="line">        <span class="built_in">set</span>Timeout(<span class="function"><span class="title">function</span></span> () &#123;</div><div class="line">            console.log(<span class="string">'this is winner'</span>);</div><div class="line">            resolve(<span class="string">'this is winner'</span>);</div><div class="line">        &#125;, 4);</div><div class="line">    &#125;);</div><div class="line">var loserPromise = new Promise(<span class="keyword">function</span> (resolve) &#123;</div><div class="line">        <span class="built_in">set</span>Timeout(<span class="function"><span class="title">function</span></span> () &#123;</div><div class="line">            console.log(<span class="string">'this is loser'</span>);</div><div class="line">            resolve(<span class="string">'this is loser'</span>);</div><div class="line">        &#125;, 1000);</div><div class="line">    &#125;);</div><div class="line">// 第一个promise变为resolve后程序停止</div><div class="line">Promise.race([winnerPromise, loserPromise]).then(<span class="keyword">function</span> (value) &#123;</div><div class="line">    console.log(value);    // =<span class="arrow-right">&gt;</span> <span class="string">'this is winner'</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p><code>Promise.race</code>并不会在第一个promise变为Fulfilled时，取消其他promise的运行，<del>但是resolve的结果却是只有第一个的，赛跑赛跑）</del></p>
<h3 id="不能进行错误处理的onRejected"><a href="#不能进行错误处理的onRejected" class="headerlink" title="不能进行错误处理的onRejected"></a>不能进行错误处理的onRejected</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">function</span> throwError(value) &#123;</div><div class="line">    // 抛出异常</div><div class="line">    throw new Error(value);</div><div class="line">&#125;</div><div class="line">// <span class="arrow-left">&lt;</span>1<span class="arrow-right">&gt;</span> onRejected不会被调用</div><div class="line"><span class="keyword">function</span> badMain(onRejected) &#123;</div><div class="line">    <span class="built_in">return</span> Promise.resolve(42).then(throwError, onRejected);</div><div class="line">&#125;</div><div class="line">// <span class="arrow-left">&lt;</span>2<span class="arrow-right">&gt;</span> 有异常发生时onRejected会被调用</div><div class="line"><span class="keyword">function</span> goodMain(onRejected) &#123;</div><div class="line">    <span class="built_in">return</span> Promise.resolve(42).then(throwError).catch(onRejected);</div><div class="line">&#125;</div><div class="line">// 运行示例</div><div class="line">badMain(<span class="function"><span class="title">function</span></span>()&#123;</div><div class="line">    console.log(<span class="string">"BAD"</span>);</div><div class="line">&#125;);</div><div class="line">goodMain(<span class="function"><span class="title">function</span></span>()&#123;</div><div class="line">    console.log(<span class="string">"GOOD"</span>);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<blockquote>
<p>为什么说 <code>badMain</code> 不好呢？，因为虽然我们在<code>.then</code> 的第二个参数中指定了用来错误处理的函数，但实际上它却不能捕获第一个参数 <code>onFulfilled</code> 指定的函数（本例为 <code>throwError</code> ）里面出现的错误。<br>也就是说，这时候即使 <code>throwError</code> 抛出了异常，onRejected 指定的函数也不会被调用（即不会输出<code>&quot;BAD&quot;</code>字样）。<br>与此相对的是， <code>goodMain</code> 的代码则遵循了 <code>throwError→onRejected</code> 的调用流程。 这时候 <code>throwError</code> 中出现异常的话，在会被方法链中的下一个方法，即 <code>.catch</code> 所捕获，进行相应的错误处理。</p>
</blockquote>
<p><strong>我们需要注意如果代码类似 badMain 那样的话，就可能出现程序不会按预期运行的情况，从而不能正确的进行错误处理。</strong></p>
<h3 id="简单的thenable"><a href="#简单的thenable" class="headerlink" title="简单的thenable"></a>简单的thenable</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">// 返回 `thenable`</div><div class="line"><span class="keyword">function</span> notifyMessageAsThenable(message, options) &#123;</div><div class="line">    <span class="built_in">return</span> &#123;</div><div class="line">        <span class="string">'then'</span>: <span class="keyword">function</span> (resolve, reject) &#123;</div><div class="line">            notifyMessage(message, options, <span class="keyword">function</span> (error, notification) &#123;</div><div class="line">                <span class="keyword">if</span> (error) &#123;</div><div class="line">                    reject(error);</div><div class="line">                &#125; <span class="keyword">else</span> &#123;</div><div class="line">                    resolve(notification);</div><div class="line">                &#125;</div><div class="line">            &#125;);</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">&#125;</div><div class="line">// 运行示例</div><div class="line">Promise.resolve(notifyMessageAsThenable(<span class="string">"message"</span>)).then(<span class="keyword">function</span> (notification) &#123;</div><div class="line">    console.log(notification);// 通知对象</div><div class="line">&#125;).catch(<span class="keyword">function</span>(error)&#123;</div><div class="line">    console.error(error);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h3 id="Deferred和Promise的关系"><a href="#Deferred和Promise的关系" class="headerlink" title="Deferred和Promise的关系"></a>Deferred和Promise的关系</h3><p><img src="http://liubin.org/promises-book/Ch4_AdvancedPromises/img/deferred-and-promise.png" alt="image"></p>
<h3 id="让Promise等待指定时间"><a href="#让Promise等待指定时间" class="headerlink" title="让Promise等待指定时间"></a>让Promise等待指定时间</h3><ul>
<li><p>简单的🌰</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">function</span> delayPromise(ms)&#123;</div><div class="line">    <span class="built_in">return</span> new Promise(<span class="function"><span class="title">function</span></span>()&#123;</div><div class="line">        <span class="built_in">set</span>Timeout(resolve,ms);</div><div class="line">    &#125;)</div><div class="line">&#125;</div><div class="line">//栗子🌰</div><div class="line">delayPromise(100).then(<span class="function"><span class="title">function</span></span>()&#123;</div><div class="line">    alert(<span class="string">'已经延迟100ms'</span>)</div><div class="line">)</div></pre></td></tr></table></figure>
</li>
<li><p>Promise.race中的超时</p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">function</span> delayPromise(ms) &#123;</div><div class="line">    <span class="built_in">return</span> new Promise(<span class="keyword">function</span> (resolve) &#123;</div><div class="line">        <span class="built_in">set</span>Timeout(resolve, ms);</div><div class="line">    &#125;);</div><div class="line">&#125;</div><div class="line"><span class="keyword">function</span> timeoutPromise(promise, ms) &#123;</div><div class="line">    var timeout = delayPromise(ms).then(<span class="function"><span class="title">function</span></span> () &#123;</div><div class="line">            throw new Error(<span class="string">'Operation timed out after '</span> + ms + <span class="string">' ms'</span>);</div><div class="line">        &#125;);</div><div class="line">    <span class="built_in">return</span> Promise.race([promise, timeout]);</div><div class="line">&#125;</div><div class="line">// 运行示例</div><div class="line">var taskPromise = new Promise(<span class="keyword">function</span>(resolve)&#123;</div><div class="line">    // 随便一些什么处理</div><div class="line">    var delay = Math.random() * 2000;</div><div class="line">    <span class="built_in">set</span>Timeout(<span class="function"><span class="title">function</span></span>()&#123;</div><div class="line">        resolve(delay + <span class="string">"ms"</span>);</div><div class="line">    &#125;, delay);</div><div class="line">&#125;);</div><div class="line">timeoutPromise(taskPromise, 1000).then(<span class="keyword">function</span>(value)&#123;</div><div class="line">    console.log(<span class="string">"taskPromise在规定时间内结束 : "</span> + value);</div><div class="line">&#125;).catch(<span class="keyword">function</span>(error)&#123;</div><div class="line">    console.log(<span class="string">"发生超时"</span>, error);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p><a href="http://liubin.org/promises-book/#promises-aplus" target="_blank" rel="external"></a></p>

      
    </div>
    
    <footer>
        <div class="alignright">
          
          <a href='javascript:void(0)' class="share-link bdsharebuttonbox" data-cmd="more">分享</a>
        </div>
        
  
  <div class="categories">
    <a href="/categories/ES6/">ES6</a>
  </div>

        
  
  <div class="tags">
    <a href="/tags/ES6/">ES6</a>, <a href="/tags/promise/">promise</a>
  </div>

        <!-- partial('post/share') -->
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



</div></div>
    <aside id="sidebar" class="alignright">
  <div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="搜索">
    <input type="hidden" name="q" value="site:www.supernever.com">
  </form>
</div>

  
<div class="widget tag">
  <h3 class="title">分类</h3>
  <ul class="entry">
  
    <li><a href="/categories/ES6/">ES6</a><small>10</small></li>
  
    <li><a href="/categories/前端/">前端</a><small>21</small></li>
  
  </ul>
</div>


  
<div class="widget tag">
  <h3 class="title">最新文章</h3>
  <ul class="entry">
    
      <li>
        <a href="/2017/11/10/box-sizing/">box-sizing</a>
      </li>
    
      <li>
        <a href="/2017/11/10/flex/">flex</a>
      </li>
    
      <li>
        <a href="/2017/07/10/javascript基础-Array/">javascript基础-Array</a>
      </li>
    
      <li>
        <a href="/2017/03/28/node-assert/">node_assert</a>
      </li>
    
      <li>
        <a href="/2017/03/03/async-await/">async-await</a>
      </li>
    
  </ul>
</div>


  
<div class="widget tag">
  <h3 class="title">标签</h3>
  <ul class="entry">
  
    <li><a href="/tags/Array/">Array</a><small>1</small></li>
  
    <li><a href="/tags/DOM/">DOM</a><small>2</small></li>
  
    <li><a href="/tags/DOM-EDIT/">DOM-EDIT</a><small>1</small></li>
  
    <li><a href="/tags/ES6/">ES6</a><small>9</small></li>
  
    <li><a href="/tags/JavaScript/">JavaScript</a><small>2</small></li>
  
    <li><a href="/tags/MySql/">MySql</a><small>1</small></li>
  
    <li><a href="/tags/Symbol/">Symbol</a><small>1</small></li>
  
    <li><a href="/tags/assert/">assert</a><small>1</small></li>
  
    <li><a href="/tags/bind/">bind</a><small>1</small></li>
  
    <li><a href="/tags/box-sizing/">box-sizing</a><small>1</small></li>
  
    <li><a href="/tags/carousel/">carousel</a><small>1</small></li>
  
    <li><a href="/tags/css/">css</a><small>1</small></li>
  
    <li><a href="/tags/css-selector/">css-selector</a><small>1</small></li>
  
    <li><a href="/tags/css3/">css3</a><small>2</small></li>
  
    <li><a href="/tags/flex/">flex</a><small>1</small></li>
  
    <li><a href="/tags/generator/">generator</a><small>1</small></li>
  
    <li><a href="/tags/getBoundingClientRect/">getBoundingClientRect</a><small>1</small></li>
  
    <li><a href="/tags/git/">git</a><small>1</small></li>
  
    <li><a href="/tags/html/">html</a><small>2</small></li>
  
    <li><a href="/tags/http/">http</a><small>1</small></li>
  
    <li><a href="/tags/javascript/">javascript</a><small>10</small></li>
  
    <li><a href="/tags/jquery/">jquery</a><small>1</small></li>
  
    <li><a href="/tags/jquery-noConflict/">jquery-noConflict</a><small>1</small></li>
  
    <li><a href="/tags/js-es6/">js-es6</a><small>2</small></li>
  
    <li><a href="/tags/js-proto/">js__proto__</a><small>1</small></li>
  
    <li><a href="/tags/js冒泡/">js冒泡</a><small>1</small></li>
  
    <li><a href="/tags/knockout-js/">knockout.js</a><small>4</small></li>
  
    <li><a href="/tags/map/">map</a><small>2</small></li>
  
    <li><a href="/tags/media-query/">media-query</a><small>1</small></li>
  
    <li><a href="/tags/mime/">mime</a><small>1</small></li>
  
    <li><a href="/tags/mobx/">mobx</a><small>1</small></li>
  
    <li><a href="/tags/nodejs/">nodejs</a><small>1</small></li>
  
    <li><a href="/tags/promise/">promise</a><small>1</small></li>
  
    <li><a href="/tags/react/">react</a><small>1</small></li>
  
    <li><a href="/tags/react-life/">react-life</a><small>1</small></li>
  
    <li><a href="/tags/reduce/">reduce</a><small>1</small></li>
  
    <li><a href="/tags/regexp/">regexp</a><small>1</small></li>
  
    <li><a href="/tags/scp/">scp</a><small>1</small></li>
  
    <li><a href="/tags/set/">set</a><small>1</small></li>
  
    <li><a href="/tags/shell/">shell</a><small>3</small></li>
  
    <li><a href="/tags/tar/">tar</a><small>1</small></li>
  
    <li><a href="/tags/tool/">tool</a><small>2</small></li>
  
    <li><a href="/tags/webpack/">webpack</a><small>1</small></li>
  
    <li><a href="/tags/webpack-howto/">webpack-howto</a><small>1</small></li>
  
    <li><a href="/tags/yarn/">yarn</a><small>1</small></li>
  
    <li><a href="/tags/代码片段/">代码片段</a><small>1</small></li>
  
    <li><a href="/tags/可视化格式模型/">可视化格式模型</a><small>1</small></li>
  
    <li><a href="/tags/小命令/">小命令</a><small>1</small></li>
  
    <li><a href="/tags/最基本操作/">最基本操作</a><small>1</small></li>
  
    <li><a href="/tags/模板/">模板</a><small>1</small></li>
  
  </ul>
</div>


  
<div class="widget tagcloud">
  <h3 class="title">标签云</h3>
  <div class="entry">
    <a href="/tags/Array/" style="font-size: 10px;">Array</a> <a href="/tags/DOM/" style="font-size: 12px;">DOM</a> <a href="/tags/DOM-EDIT/" style="font-size: 10px;">DOM-EDIT</a> <a href="/tags/ES6/" style="font-size: 18px;">ES6</a> <a href="/tags/JavaScript/" style="font-size: 12px;">JavaScript</a> <a href="/tags/MySql/" style="font-size: 10px;">MySql</a> <a href="/tags/Symbol/" style="font-size: 10px;">Symbol</a> <a href="/tags/assert/" style="font-size: 10px;">assert</a> <a href="/tags/bind/" style="font-size: 10px;">bind</a> <a href="/tags/box-sizing/" style="font-size: 10px;">box-sizing</a> <a href="/tags/carousel/" style="font-size: 10px;">carousel</a> <a href="/tags/css/" style="font-size: 10px;">css</a> <a href="/tags/css-selector/" style="font-size: 10px;">css-selector</a> <a href="/tags/css3/" style="font-size: 12px;">css3</a> <a href="/tags/flex/" style="font-size: 10px;">flex</a> <a href="/tags/generator/" style="font-size: 10px;">generator</a> <a href="/tags/getBoundingClientRect/" style="font-size: 10px;">getBoundingClientRect</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/html/" style="font-size: 12px;">html</a> <a href="/tags/http/" style="font-size: 10px;">http</a> <a href="/tags/javascript/" style="font-size: 20px;">javascript</a> <a href="/tags/jquery/" style="font-size: 10px;">jquery</a> <a href="/tags/jquery-noConflict/" style="font-size: 10px;">jquery-noConflict</a> <a href="/tags/js-es6/" style="font-size: 12px;">js-es6</a> <a href="/tags/js-proto/" style="font-size: 10px;">js__proto__</a> <a href="/tags/js冒泡/" style="font-size: 10px;">js冒泡</a> <a href="/tags/knockout-js/" style="font-size: 16px;">knockout.js</a> <a href="/tags/map/" style="font-size: 12px;">map</a> <a href="/tags/media-query/" style="font-size: 10px;">media-query</a> <a href="/tags/mime/" style="font-size: 10px;">mime</a> <a href="/tags/mobx/" style="font-size: 10px;">mobx</a> <a href="/tags/nodejs/" style="font-size: 10px;">nodejs</a> <a href="/tags/promise/" style="font-size: 10px;">promise</a> <a href="/tags/react/" style="font-size: 10px;">react</a> <a href="/tags/react-life/" style="font-size: 10px;">react-life</a> <a href="/tags/reduce/" style="font-size: 10px;">reduce</a> <a href="/tags/regexp/" style="font-size: 10px;">regexp</a> <a href="/tags/scp/" style="font-size: 10px;">scp</a> <a href="/tags/set/" style="font-size: 10px;">set</a> <a href="/tags/shell/" style="font-size: 14px;">shell</a> <a href="/tags/tar/" style="font-size: 10px;">tar</a> <a href="/tags/tool/" style="font-size: 12px;">tool</a> <a href="/tags/webpack/" style="font-size: 10px;">webpack</a> <a href="/tags/webpack-howto/" style="font-size: 10px;">webpack-howto</a> <a href="/tags/yarn/" style="font-size: 10px;">yarn</a> <a href="/tags/代码片段/" style="font-size: 10px;">代码片段</a> <a href="/tags/可视化格式模型/" style="font-size: 10px;">可视化格式模型</a> <a href="/tags/小命令/" style="font-size: 10px;">小命令</a> <a href="/tags/最基本操作/" style="font-size: 10px;">最基本操作</a> <a href="/tags/模板/" style="font-size: 10px;">模板</a>
  </div>
</div>

</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  <p>
  
  &copy; 2017 supernever
  
  All rights reserved.</p>
  <p>Powered by <a href="http://hexo.io/" target="_blank">Hexo</a></p>
</div>
<div class="clearfix"></div>

<script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"1","bdMiniList":false,"bdPic":"","bdStyle":"2","bdSize":"16"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];</script></footer>
  <script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>


<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>


<div id='bg'></div>
</body>
</html>